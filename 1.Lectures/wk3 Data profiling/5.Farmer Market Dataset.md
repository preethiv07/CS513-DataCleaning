# Lecture: OpenRefine Demo â€“ Farmerâ€™s Market Dataset

## âœ… Summary

This hands-on demo walks through how to use **OpenRefine** with a real-world dataset â€” the **USDA Farmers Market directory**. It demonstrates how to create a project, clean and normalize textual data, apply clustering to merge similar entries, and convert column types to enable data profiling via facets such as **Timeline** and **Scatterplot**.

Key objectives:
- Import and profile tabular data
- Normalize text data (e.g., `MarketName`)
- Use clustering to detect and merge inconsistent entries
- Transform strings into numbers and dates
- Explore data visually using scatterplot and timeline facets

---

## ðŸ“š Details

### ðŸ”¸ Step-by-Step Workflow

#### 1. ðŸ—‚ï¸ Create New Project
- Navigate to **Create Project**
- Upload `Export.csv` (downloaded from USDA)
- OpenRefine auto-detects correct settings
- Name the project: `Farmers-Markets`
- âœ… 8,664 rows imported successfully

---

#### 2. ðŸ” Profile `MarketName` with Text Facet
- Select the **MarketName** column
- Choose **Facet â†’ Text Facet**
- Reveals 8,095 unique values across 8,664 rows
- Sort by **count** to see most frequent entries (e.g., `El Mercado Familiar` appears 33 times)

---

#### 3. ðŸ”„ Normalize `MarketName` with Clustering
- Select **Cluster** under the Text Facet
- Review detected clusters (e.g., multiple variants of `Irvington Farmers Market`)
- Clean typos, casing issues, and extra whitespace
- Merge selected entries to one **canonical value**
- Optionally, select **all clusters** and merge if confident
- âœ… Result: Unique values reduced from 8,095 â†’ 7,846

---

#### 4. ðŸ§® Convert Coordinates to Numeric
- Columns: `x` and `y` (likely longitude and latitude)
- For each:
  - Go to **Edit cells â†’ Common transforms â†’ To number**
  - âœ… 8,635 cells successfully converted

---

#### 5. ðŸ“Š Apply Scatterplot Facet
- With numeric values in `x` and `y`, choose:
  - **Facet â†’ Scatterplot Facet**
- Result:
  - A visual layout resembling the **continental U.S.**
  - Additional points likely represent **Alaska and Hawaii**
  - Outlier points can be further investigated

---

#### 6. ðŸ“… Convert `updateTime` to Date
- Column: `updateTime`
- **Edit cells â†’ Common transforms â†’ To date**
- âœ… 8,131 rows converted to date
- âŒ ~500 rows could not be parsed (possibly due to bad formatting)

---

#### 7. ðŸ•’ Apply Timeline Facet
- With `updateTime` now in date format:
  - Apply **Facet â†’ Timeline Facet**
- Explore data distribution by year using sliders
- Noticeable peak in entries during 2010â€“2011
- Some rows contain incomplete or missing product information

---

### ðŸ”¸ Final Notes

- This demo showcased OpenRefine's **ease and power** in handling real-world messy data.
- You can visually explore data quality issues using facets.
- Use **clustering** and **type conversion** to clean and normalize your dataset.
- The tool also supports export to tools like **Google Maps**, enabling geospatial visualization.

---

> OpenRefine lets you explore, clean, and normalize datasets efficiently â€” even if they come from inconsistent or crowdsourced sources.